define(function(require,exports,module){var i=require("component/popupTip"),t=require("component/dialogView"),e=Backbone.Model.extend({actions:{activite:"./guarantee-active",cancel:"./guarantee-lapse"},activite:function(){var i=this.get("orderId");if(i){var t=this,e={url:this.actions.activite,dataType:"json",type:"post"};e.success=function(i){t.trigger("activite",i)},$.ajax(e)}},cancel:function(){var i=this.get("orderId");if(i){var t=this,e={url:this.actions.cancel,dataType:"json",type:"post"};e.success=function(i){t.trigger("cancel",i)},$.ajax(e)}}}),n=Backbone.View.extend({el:".content",events:{"click #activite":"onClickActivite","click #cancel":"onClickCancel"},initialize:function(i){var n={orderId:i};this.model=new e(n),this.confirm=new t,this.listenTo(this.model,"activite",this.onAjaxCallback),this.listenTo(this.model,"cancel",this.onAjaxCallback),this.listenTo(this.confirm,"goahead",function(i){i.call(this.model),this.confirm.hide()})},delayReload:function(i){setTimeout(function(){location.reload()},i||1e3)},onAjaxCallback:function(t){0==t.code?this.delayReload():i.show(t.message)},onClickActivite:function(){this.confirm.show("确认激活？",this.model.activite)},onClickCancel:function(){this.confirm.show("确认作废？",this.model.cancel)}});module.exports=n});