define(function(require,exports,module){var e=require("component/popupTip"),t=(require("component/pagination"),require("baseView/baseFormView").FormDialogView),n=jQuery,a=global_config.root,i=t.extend({template:_.template(n("#resendRemittancePlanTmpl").html()),submitHandler:function(){this.hide(),location.reload()}}),o=t.extend({template:_.template(n("#modifyNoteTmpl").html()),action:{save:a+""},initialize:function(){o.__super__.initialize.apply(this,arguments),this.defineValidator()},defineValidator:function(){this.validator=this.$("form").validate({rules:{note:{required:!0,maxlength:50}},messages:{note:{maxlength:"备注信息不超过50字"}}})},validate:function(){this.validator.form()},save:function(){var t={url:this.action.save,dataType:"json",data:""};t.success=function(t){1===t.code||e.show(t.message)},n.ajax(t)},submitHandler:function(){!this.validate()}}),s=t.extend({template:_.template(n("#channelLoanTmpl").html()),action:{save:a+""},initialize:function(){s.__super__.initialize.apply(this,arguments),this.defineValidator()},defineValidator:function(){this.validator=this.$("form").validate({rules:{channelSelect:"required"}})},validate:function(){this.validator.form()},save:function(){var t={url:this.action.save,dataType:"json",data:""};t.success=function(t){1==t.code||e.show(t.message)},n.ajax(t)},submitHandler:function(){!this.validate()}}),l=Backbone.View.extend({el:".content",actions:{resendRemittancePlan:function(e){return a+"/remittance/plan/resend?remittancePlanUuid="+e}},events:{"click #modifyNote":"onClickModifyNote","click #channelLoan":"onClickChannelLoan","click #resendRemittancePlan":"onClickResendRemittancePlan","mouseover .showPopover":"showPopover","mouseout .showPopover":"showPopover"},onClickResendRemittancePlan:function(t){var a=n(t.target).data("remittanceplanuuid"),o={url:this.actions.resendRemittancePlan(a),dataType:"json"};o.success=function(t){if(0==t.code){var n=new i;n.show()}else e.show(t.message)},n.ajax(o)},onClickModifyNote:function(e){e.preventDefault();var t=new o;t.show()},onClickChannelLoan:function(e){e.preventDefault();var t=new s;t.show()},showPopover:function(e){var t=n(e.target),a=t.siblings(".account").html();t.popover({content:a}),t.popover("toggle")}});module.exports=l});