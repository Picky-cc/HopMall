define(function(require,exports,module){var t=Backbone.Model.extend({initialize:function(t,e){this.sourceModel=e.sourceModel||{},this.options=e},getContractDeadLine:function(){return this.sourceModel.contractBasicInfo.toJSON()},isEqualContractStartDate:function(){var t=this.getContractDeadLine(),e="缴租第一阶段的开始日期必须等于合同开始日期";return t.effectiveTime!==this.get("startDate")?(this.trigger("payperiod:validate",!1,e),!1):(this.trigger("payperiod:validate",!0),!0)},isEqualContractEndDate:function(){var t=this.getContractDeadLine(),e="缴租最后阶段的结束日期必须等于合同结束日期";return t.maturityTime!==this.get("endDate")?(this.trigger("payperiod:validate",!1,e),!1):(this.trigger("payperiod:validate",!0),!0)},validateStageDate:function(){var t=this.toJSON(),e=this.getContractDeadLine(),n=e.effectiveTime&&new Date(e.effectiveTime)>new Date(t.startDate),a=e.maturityTime&&new Date(e.maturityTime)<new Date(t.endDate),i="缴租阶段应在合同期限之内";return n||a?(this.trigger("payperiod:validate",!1,i),!1):(this.trigger("payperiod:validate",!0),!0)}}),e=Backbone.Model.extend({getAllClauseTypes:function(){var t=JSON.parse($("#supplementaryNameAliasMap").val()||"{}"),e=[];for(var n in t)e.push({value:n,name:t[n]});return e},getSelectedClauseTypes:function(){var t=this.collection.toJSON();return t},getRemainClauseTypes:function(){var t=this.getSelectedClauseTypes()||[],e=this.getAllClauseTypes(),n=this.get("clauseType"),a=_.filter(e,function(e){if(e.value===n)return!0;var a=_.find(t,{clauseType:e.value});return!a});return a}}),n=Backbone.Model.extend({urlRoot:"./",idAttribute:"businessContractUuid",initialize:function(t,e){this.subjectMatterInfo=new Backbone.Model,this.contractBasicInfo=new Backbone.Model,this.renterInfo=new Backbone.Model,this.paymentInfo=new Backbone.Model,this.attachmentInfo=new Backbone.Model},parse:function(t){if(0==t.code){var e=t.data;return this.fillInternalModel(e),e}},fillInternalModel:function(t){t.paymentInfo&&(t.paymentInfo.supplementaryTermInfo=t.supplementaryTermInfo),this.subjectMatterInfo.set(t.subjectMatterInfo),this.contractBasicInfo.set(t.contractBasicInfo),this.renterInfo.set(t.renterInfo),this.paymentInfo.set(t.paymentInfo),this.attachmentInfo.set(t.attachmentInfo)},saveAll:function(t){var e=this.paymentInfo.toJSON(),n=e.supplementaryTermInfo;e.supplementaryTermInfo=null,this.set({subjectMatterInfo:this.subjectMatterInfo.toJSON(),contractBasicInfo:this.contractBasicInfo.toJSON(),renterInfo:this.renterInfo.toJSON(),attachmentInfo:this.attachmentInfo.toJSON(),paymentInfo:e,supplementaryTermInfo:n}),this.save({},t)}});exports.LeasingContractModel=n,exports.PayStageItemModel=t,exports.ExtraRuleItemModel=e});