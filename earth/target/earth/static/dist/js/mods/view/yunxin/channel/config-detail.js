define(function(require,exports,module){var e=require("scaffold/highcharts"),t=require("baseView/tableContent"),n=global_config.root;e.setOptions({colors:["#69c2e2","#ed4407"],credits:{enabled:!1},chart:{marginTop:50},title:{text:null},plotOptions:{line:{marker:{symbol:"circle"}}},xAxis:{lineColor:"#dedede",tickLength:0,labels:{enabled:!1}},yAxis:{lineWidth:1,tickInterval:10,lineColor:"#dedede",gridLineColor:"#cdcdcd",gridLineDashStyle:"Dash",title:{text:null}},legend:{align:"right",verticalAlign:"top",y:-10},tooltip:{enabled:!1}});var a=Backbone.View.extend({el:".content",events:{"change .filter-channel":"getChannelData","change .filter-turnover":"getTurnoverData"},actions:{searchTradingVolume:n+"/paymentchannel/config/transactionDetail/searchTradingVolume"},initialize:function(n){this.paymentChannelUuid=n,this.orderListView=new t({el:".table-layout-detail"}),this.turnoverChart=new e.Chart({chart:{renderTo:this.$("#drawContainer1").get(0)},series:[]}),this.channelChart=new e.Chart({chart:{renderTo:this.$("#drawContainer2").get(0)},series:[]}),this.on("response:channel",function(e){0==this.channelChart.series?(this.channelChart.addSeries({name:"付款通道费",data:e[0]}),this.channelChart.addSeries({name:"付款交易额",data:e[1]})):(this.channelChart.series[0].setData(e[0]),this.channelChart.series[1].setData(e[1]))}),this.on("response:turnover",function(e){0==this.turnoverChart.series?(this.turnoverChart.addSeries({name:"付款交易额",data:e.creditAmountList}),this.turnoverChart.addSeries({name:"收款交易额",data:e.debitAmountList})):(this.turnoverChart.series[0].setData(e.creditAmountList),this.turnoverChart.series[1].setData(e.debitAmountList))}),$(document).on("toggle.aside",function(e){this.turnoverChart.reflow(),this.channelChart.reflow()}.bind(this)),this.getChannelData(),this.getTurnoverData()},getChannelData:function(){var e=this;this.$(".filter-channel").val();setTimeout(function(){var t=[];e.trigger("response:channel",t)},500)},getTurnoverData:function(){var e=this,t={url:this.actions.searchTradingVolume,dataType:"json",data:{time:this.$(".filter-turnover").val(),paymentChannelUuid:this.paymentChannelUuid}};t.success=function(t){0==t.code&&e.trigger("response:turnover",t.data)},$.ajax(t)}});module.exports=a});