define(function(require,exports,module){var n=require("baseView/tableContent"),e=require("component/popupTip"),t=(require("component/dialogView"),n.extend({events:{"click .apply-for-envelope":"onApplyingForEnvelope","click .cancel-enveloped":"onCancelEnvelopeing","click .check-box":"onClickCheckbox","click .batch-envelope":"onClickBatchEnvelop"},initialize:function(n){t.__super__.initialize.apply(this,arguments)},onClickCheckbox:function(n){if(!$(n.target).is(".txt")){$(n.currentTarget).children("input").get(0).checked}},onApplyingForEnvelope:function(n){var e=[];e.push($(n.target).parent("td").attr("billing-plan-uuid"));var t=this;t.asyncPost("../apply-to-enveloping-bills",e,function(n){t.refreshTable()})},onCancelEnvelopeing:function(n){var e=[];e.push($(n.target).parent("td").attr("billing-plan-uuid"));var t=this;t.asyncPost("../revoking-enveloping-bills",e,function(n){t.refreshTable()})},asyncPost:function(n,e,t){var i={url:n,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)};i.success=t,$.ajax(i)},refreshTable:function(){this.refresh()},onClickBatchEnvelop:function(n){for(var t=[],i=$("tbody>tr"),o=0;o<i.length;o++)$(i[o]).find("input").get(0).checked&&t.push($(i[o]).find("td:last").attr("billing-plan-uuid"));0==t.length?e.show("请选择要申请的账单"):this.asyncPost("../apply-to-enveloping-bills",t,function(n){e.show(n.message),"0"==n.code&&setTimeout(function(){location.reload()},1500)})}}));exports.PaymentBillView=t});