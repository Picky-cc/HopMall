define(function(require,exports,module){var t=require("scaffold/util"),e=require("component/pageControl"),a=jQuery,i=t.extractValueFromDifferentDom,n=Backbone.View.extend({template:_.template(a("#tableFieldTmpl").html()||""),el:".content",events:{"click #lookup":"_queryByParams","click .prev":"getPrevListData","click .next":"getNextListData"},initialize:function(){this.lookupParamsEl=this.$(".lookup-params"),this.tableListEl=this.$(".data-list"),this.queryAction=this.tableListEl.data("action"),this.initPageControl()},initPageControl:function(){var t={url:this.queryAction,pageIndex:1,pageRecordNum:12};this.pageControl=new e(t),this.pageControl.on("next:pagecontrol prev:pagecontrol redirect:pagecontrol",_.bind(this.refreshTableDataList,this))},setPageControlOptions:function(t){this.pageControl.setOptions(t)},getFirstPageData:function(){this.pageControl.redirect(1,null)},collectParams:function(){for(var t,e=this.lookupParamsEl.find(".item"),n={},r=0,o=e.length;o>r;r++)t=a(e[r]).find(".form-control"),a.extend(n,i(t));return n},getPrevListData:function(t){t.preventDefault();var e=this.collectParams();this.pageControl.prev(e)},getNextListData:function(t){t.preventDefault();var e=this.collectParams();this.pageControl.next(e)},_queryByParams:function(){var t=this.collectParams();this.queryByParams(t)},refreshTableDataList:function(t){if(this.template){var e;e=t.length<1?'<tr><td style="text-align: center;" colspan="100">没有更多数据</td></tr>':this.template({list:t}),this.tableListEl.find("tbody").html(e)}},queryByParams:function(t){var t=this.collectParams();this.pageControl.redirect(1,t)},refresh:function(){var t=this.collectParams();this.pageControl.refresh(t)}});n.extend=function(t){var e=Backbone.View.extend.apply(this,arguments);return e.prototype.events=_.extend({},this.prototype.events,t.events),e},module.exports=n});