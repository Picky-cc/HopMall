define(function(require,exports,module){var e=(require("component/popupTip"),require("baseView/baseFormView").FormDialogView),i=e.extend({template:_.template($("#addCashFlowTmpl").html(),{variable:"obj"}),actions:{save:"../finance/add-cash-flow"},className:"modal fade form-modal",initialize:function(e){i.__super__.initialize.apply(this,arguments),this.query=e.query,this.defineValidator()},defineValidator:function(){this.validator=this.$(".form").validate({ignore:null,rules:{payName:"required",amount:{required:!0,positiveNumber:!0},remark:{maxlength:30},transactionDate:"required"},success:function(e,i){var t=$(i).parent();t.is(".imitate-datetimepicker-input")&&i.value&&t.removeClass("error")},errorPlacement:function(e,i){var t=i.parent();t.is(".parcel-input")?e.insertAfter(t):t.is(".imitate-datetimepicker-input")?t.addClass("error"):e.insertAfter(i)}})},validate:function(){return this.validator.form()},submitHandler:function(e){this.validate()&&(this.save(),this.hide())},save:function(){var e=this,i=this.extractDomData();$.extend(i,this.query);var t={url:this.actions.save,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)};t.success=function(i){e.trigger("sync:save",i)},$.ajax(t)}});module.exports=i});